<% content_for :title, "1impegno · #{@domain.title.presence || @domain.host}" %>

<div class="space-y-6">
  <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <h1 class="text-3xl font-bold text-slate-900">1impegno</h1>
    <p class="text-sm text-slate-600 mt-1">
      Impegni registrati per il dominio <strong><%= @domain.title.presence || @domain.host %></strong>.
    </p>
    <%= link_to "← Torna al dominio",
                superadmin_domain_path(@domain),
                class: "inline-flex items-center text-sm font-medium text-blue-600 hover:underline mt-3" %>
  </div>

  <div class="grid gap-4 md:grid-cols-3">
    <div class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
      <p class="text-xs uppercase tracking-wide text-slate-500">Commitment</p>
      <p class="text-2xl font-semibold text-slate-900"><%= @commitments_count %></p>
    </div>
    <div class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
      <p class="text-xs uppercase tracking-wide text-slate-500">Minuti totali</p>
      <p class="text-2xl font-semibold text-slate-900"><%= @total_minutes %></p>
    </div>
    <div class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
      <p class="text-xs uppercase tracking-wide text-slate-500">Compensi</p>
      <p class="text-2xl font-semibold text-slate-900"><%= number_to_currency(@total_compensation) %></p>
    </div>
  </div>

  <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <h2 class="text-lg font-semibold text-slate-900">Ultimi impegni</h2>
    <% if @recent_commitments.any? %>
      <div class="mt-4 divide-y divide-slate-200 text-sm">
        <% @recent_commitments.each do |commitment| %>
          <div class="py-3 flex items-center justify-between gap-4">
            <div>
              <p class="font-medium text-slate-900">
                <%= commitment.eventdate&.journey&.title || "Senza journey" %>
              </p>
              <p class="text-slate-500">
                <%= commitment.eventdate&.date_start&.strftime("%d/%m/%Y") || "Data non disponibile" %>
              </p>
            </div>
            <span class="text-slate-500"><%= commitment.commitment_kind.humanize %></span>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="mt-3 text-sm text-slate-500">Nessun impegno trovato.</p>
    <% end %>
  </div>
</div>
