<div class="flex flex-col gap-4">
  <div>
    <p class="text-xs text-[#9dabb9] uppercase tracking-wide">Work Journey</p>
    <h3 class="text-xl font-semibold text-white"><%= journey.title.presence || journey.slug %></h3>
    <p class="text-sm text-[#9dabb9] mt-1"><%= journey.notes.presence || "Nessuna nota disponibile." %></p>
  </div>

  <div class="grid gap-3 sm:grid-cols-2 text-sm">
    <div>
      <p class="text-xs uppercase text-[#9dabb9]">Partenza</p>
      <p class="text-white"><%= journey.taxbranch&.display_label || "—" %></p>
    </div>
    <div>
      <p class="text-xs uppercase text-[#9dabb9]">Arrivo</p>
      <p class="text-white"><%= journey.end_taxbranch_id ? Taxbranch.find_by(id: journey.end_taxbranch_id)&.display_label : "—" %></p>
    </div>
    <div>
      <p class="text-xs uppercase text-[#9dabb9]">Tipo</p>
      <p class="text-white"><%= journey.kind %></p>
    </div>
    <div>
      <p class="text-xs uppercase text-[#9dabb9]">Fase</p>
      <p class="text-white"><%= journey.journeys_status || "—" %></p>
    </div>
    <div>
      <p class="text-xs uppercase text-[#9dabb9]">Progresso</p>
      <p class="text-white"><%= journey.computed_progress %>%</p>
    </div>
    <div>
      <p class="text-xs uppercase text-[#9dabb9]">Priorita</p>
      <p class="text-white"><%= [journey.importance, journey.urgency, journey.energy].compact.join(" · ").presence || "—" %></p>
    </div>
    <div class="sm:col-span-2">
      <p class="text-xs uppercase text-[#9dabb9]">Ruoli</p>
      <% if journey.journey_roles.present? %>
        <div class="mt-1 flex flex-wrap gap-2">
          <% journey.journey_roles.each do |role| %>
            <span class="inline-flex items-center rounded-full border border-[#283039] px-2.5 py-1 text-xs font-semibold text-[#c5ced8]">
              <%= role %>
            </span>
          <% end %>
        </div>
      <% else %>
        <p class="text-white">—</p>
      <% end %>
    </div>
  </div>

  <div class="flex items-center gap-3">
    <%= link_to "Apri Journey",
                journey_path(journey),
                class: "inline-flex items-center rounded-lg bg-primary px-4 py-2 text-xs font-semibold text-white hover:bg-primary/90" %>
    <%= link_to "Reset",
                rails4b_superadmin_domain_path(@domain, tab: "journeys"),
                class: "inline-flex items-center rounded-lg border border-[#283039] px-3 py-2 text-xs font-semibold text-[#9dabb9] hover:text-white" %>
  </div>

  <%= render "journey_eventdates", journey: journey %>
</div>
