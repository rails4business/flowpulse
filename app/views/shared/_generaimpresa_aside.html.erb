<aside class="w-64 border-r border-[#283039] flex flex-col bg-background-light dark:bg-background-dark p-4 shrink-0">
  <div class="flex flex-col gap-6 h-full">
    <div>
      <% if @domain.present? %>
        <%= link_to superadmin_domain_path(@domain),
                    class: "flex items-start gap-3 px-3 py-3 rounded-lg transition-colors #{current_page?(superadmin_domain_path(@domain)) ? "bg-primary/20 border border-primary/30" : "hover:bg-[#283039]"}" do %>
          <span class="material-symbols-outlined #{current_page?(superadmin_domain_path(@domain)) ? "text-primary" : "text-white"}">inventory_2</span>
          <div>
            <h1 class="text-white text-base font-bold leading-normal mb-1">
              <%= @domain.host %>
            </h1>
            <p class="text-[#9dabb9] text-xs font-normal">Gestione</p>
          </div>
        <% end %>
      <% else %>
        <%= link_to superadmin_domains_path,
                    class: "flex items-start gap-3 px-3 py-3 rounded-lg transition-colors hover:bg-[#283039]" do %>
          <span class="material-symbols-outlined text-white">inventory_2</span>
          <div>
            <h1 class="text-white text-base font-bold leading-normal mb-1">
              Domains
            </h1>
            <p class="text-[#9dabb9] text-xs font-normal">Seleziona dominio</p>
          </div>
        <% end %>
      <% end %>
    </div>

    <div class="flex flex-col gap-2">
      <% if @domain.present? %>
        <%= link_to generaimpresa_superadmin_domain_path(@domain),
                    class: "flex items-center gap-3 px-3 py-3 rounded-lg transition-colors #{current_page?(generaimpresa_superadmin_domain_path(@domain)) ? "bg-primary/20 border border-primary/30" : "hover:bg-[#283039]"}" do %>
          <span class="material-symbols-outlined #{current_page?(generaimpresa_superadmin_domain_path(@domain)) ? "text-primary" : "text-white"}">map</span>
          <p class="text-white text-sm font-medium">Generaimpresa</p>
        <% end %>
        <%= link_to rails4b_superadmin_domain_path(@domain),
                    class: "flex items-center gap-3 px-3 py-3 rounded-lg transition-colors #{current_page?(rails4b_superadmin_domain_path(@domain)) ? "bg-primary/20 border border-primary/30" : "hover:bg-[#283039]"}" do %>
          <span class="material-symbols-outlined #{current_page?(rails4b_superadmin_domain_path(@domain)) ? "text-primary" : "text-white"}">polyline</span>
          <p class="text-white text-sm font-medium">Rails4B</p>
        <% end %>

        <%= link_to impegno_superadmin_domain_path(@domain),
                    class: "flex items-center gap-3 px-3 py-3 rounded-lg transition-colors #{current_page?(impegno_superadmin_domain_path(@domain)) ? "bg-primary/20 border border-primary/30" : "hover:bg-[#283039]"}" do %>
          <span class="material-symbols-outlined #{current_page?(impegno_superadmin_domain_path(@domain)) ? "text-primary" : "text-white"}">local_shipping</span>
          <p class="text-white text-sm font-medium">1impegno</p>
        <% end %>
        <% lead_impegno_path = @domain.taxbranch&.lead ? impegno_superadmin_lead_path(@domain.taxbranch.lead) : nil %>
        <% fallback_path = impegno_superadmin_domain_path(@domain) %>
        <% target_path = lead_impegno_path || fallback_path %>
        <% is_active = current_page?(target_path) %>
        <%= link_to target_path,
                    class: class_names(
                      "flex items-center gap-3 px-3 py-3 rounded-lg transition-colors",
                      lead_impegno_path.nil? ? "opacity-60 cursor-not-allowed" : "hover:bg-[#283039]",
                      is_active ? "bg-primary/20 border border-primary/30" : nil
                    ) do %>
          <span class="material-symbols-outlined #{is_active ? "text-primary" : "text-white"}">person</span>
          <p class="text-white text-sm font-medium">Collaboratori</p>
        <% end %>
        <% lead_weekplan_path = @domain.taxbranch&.lead ? weekplan_lead_path(@domain.taxbranch.lead) : nil %>
        <% weekplan_path = lead_weekplan_path || superadmin_domains_path %>
        <% weekplan_active = lead_weekplan_path && current_page?(lead_weekplan_path) %>
        <%= link_to weekplan_path,
                    class: class_names(
                      "flex items-center gap-3 px-3 py-3 rounded-lg transition-colors",
                      lead_weekplan_path.nil? ? "opacity-60 cursor-not-allowed" : "hover:bg-[#283039]",
                      weekplan_active ? "bg-primary/20 border border-primary/30" : nil
                    ) do %>
          <span class="material-symbols-outlined #{weekplan_active ? "text-primary" : "text-white"}">edit_calendar</span>
          <p class="text-white text-sm font-medium">Week Plan</p>
        <% end %>
      <% else %>
        <%= link_to superadmin_domains_path,
                    class: "flex items-center gap-3 px-3 py-3 rounded-lg transition-colors hover:bg-[#283039]" do %>
          <span class="material-symbols-outlined text-white">map</span>
          <p class="text-white text-sm font-medium">Generaimpresa</p>
        <% end %>
        <%= link_to superadmin_domains_path,
                    class: "flex items-center gap-3 px-3 py-3 rounded-lg transition-colors hover:bg-[#283039]" do %>
          <span class="material-symbols-outlined text-white">polyline</span>
          <p class="text-white text-sm font-medium">Rails4B</p>
        <% end %>

        <%= link_to superadmin_domains_path,
                    class: "flex items-center gap-3 px-3 py-3 rounded-lg transition-colors hover:bg-[#283039]" do %>
          <span class="material-symbols-outlined text-white">local_shipping</span>
          <p class="text-white text-sm font-medium">1impegno</p>
        <% end %>
        <%= link_to superadmin_domains_path,
                    class: "flex items-center gap-3 px-3 py-3 rounded-lg transition-colors hover:bg-[#283039]" do %>
          <span class="material-symbols-outlined text-white">person</span>
          <p class="text-white text-sm font-medium">Collaboratori</p>
        <% end %>
        <%= link_to superadmin_domains_path,
                    class: "flex items-center gap-3 px-3 py-3 rounded-lg transition-colors hover:bg-[#283039]" do %>
          <span class="material-symbols-outlined text-white">edit_calendar</span>
          <p class="text-white text-sm font-medium">Week Plan</p>
        <% end %>
      <% end %>
    </div>
    <div class="mt-4">
      <h3 class="text-[#9dabb9] text-xs font-bold uppercase tracking-wider px-3 mb-2">
        Linee di Business
      </h3>
      <div class="flex flex-col gap-2">
        <div class="flex items-center gap-3 px-3 py-2">
          <div class="w-4 h-1 bg-primary rounded-full shadow-[0_0_8px_#137fec]"></div>
          <span class="text-white text-xs font-medium">Core Stream</span>
        </div>
        <div class="flex items-center gap-3 px-3 py-2">
          <div class="w-4 h-1 bg-pink-500 rounded-full shadow-[0_0_8px_#ec4899]"></div>
          <span class="text-white text-xs font-medium">Marketing</span>
        </div>
        <div class="flex items-center gap-3 px-3 py-2">
          <div class="w-4 h-1 bg-emerald-400 rounded-full shadow-[0_0_8px_#34d399]"></div>
          <span class="text-white text-xs font-medium">Logistica</span>
        </div>
      </div>
    </div>
    <div class="mt-auto">
      <button class="flex w-full items-center justify-center gap-2 rounded-lg h-10 px-4 bg-[#1380ec] text-white text-sm font-bold transition-all hover:bg-[#1380ec]/90">
        <span class="material-symbols-outlined text-sm">add</span>
        <span>Nuova Stazione</span>
      </button>
    </div>
  </div>
</aside>
