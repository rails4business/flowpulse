<%# Blog Creators — Index degli articoli dai children del taxbranch %>
<div class="mx-auto max-w-6xl px-4 py-10">
  <header class="mb-8">
    <h1 class="text-3xl font-bold">Blog Creator</h1>
    <% if @taxbranch&.description.present? %>
      <p class="mt-2 text-slate-600"><%= @taxbranch.description %></p>
    <% end %>
  </header>

  <% if Current.domain.taxbranch.lead.posts.blank? %>
    <p class="text-slate-500">Non ci sono articoli pubblicati.</p>
  <% else %>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <% Current.domain.taxbranch.lead.posts.each do |post| %>
     
        
        <% next unless post.present? %>

        <article class="rounded-2xl border border-slate-200 overflow-hidden bg-white shadow-sm hover:shadow-md transition">
          <%= link_to post, class: "block" do %>
            <% if post.cover_url.present? %>
              <img src="<%= post.cover_url %>" alt="<%= post.title %>" class="h-40 w-full object-cover">
            <% end %>

            <div class="p-4">
              <h2 class="text-lg font-semibold leading-snug"><%= post.title %></h2>

              <% if post.description.present? %>
                <p class="mt-2 line-clamp-3 text-sm text-slate-600"><%= post.description %></p>
              <% end %>

              <div class="mt-3 text-xs text-slate-500 flex items-center gap-2">
                <% if post.published_at.present? %>
                  <time datetime="<%= post.published_at.iso8601 %>"><%= l(post.published_at, format: :short) %></time>
                <% end %>
               
              </div>
            </div>
          <% end %>
        </article>
      <% end %>
    </div>

    <%# Paginazione (se @children è paginato) %>
    <div class="mt-8">
      <% if defined?(paginate) && @children.respond_to?(:current_page) %>
        <%= paginate @children %>
      <% end %>
    </div>
  <% end %>
</div>
