<%# app/views/posts/pricing.html+book.erb %>
<% content_for :title, "#{@post.title.presence || 'Post'} — Pricing" %>

<body class="bg-slate-50 text-slate-800 antialiased px-4 sm:px-8 lg:px-0 print:p-0 dark:bg-slate-950 dark:text-slate-100">
  <div class="max-w-3xl lg:max-w-4xl mx-auto print:max-w-[38rem] print:px-0">
    <header class="mx-auto max-w-3xl lg:max-w-4xl px-4 sm:px-8 lg:px-0 py-8 space-y-4">
      <div class="space-y-2">
        <h1 class="text-3xl font-bold text-slate-900 dark:text-slate-100">Tariffe</h1>
        <p class="text-base text-slate-600 leading-relaxed dark:text-slate-300">
          <%= @post.title.presence || "Offerte" %>
        </p>
      </div>
      <div class="mt-4 flex flex-wrap items-center gap-3 no-print">
        <%= link_to "↩︎ Torna al post",
                    post_path(@post),
                    class: "rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:hover:bg-slate-800" %>
      </div>
    </header>

    <main class="mx-auto max-w-3xl lg:max-w-4xl px-4 sm:px-8 lg:px-0 pb-16 space-y-4">
      <% if @services.any? %>
        <div class="grid gap-4 sm:grid-cols-2">
          <% @services.each do |service| %>
            <div class="rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900">
              <div class="mb-3 overflow-hidden rounded-lg bg-slate-100 dark:bg-slate-800 aspect-square">
                <% if service.image_url.present? %>
                  <img src="<%= service.image_url %>" alt="<%= service.name %>" class="h-full w-full object-cover" />
                <% else %>
                  <div class="flex h-full items-center justify-center text-slate-300 dark:text-slate-600">
                    <svg class="h-10 w-10" viewBox="0 0 64 64" fill="none" aria-hidden="true">
                      <rect x="12" y="12" width="40" height="40" rx="12" stroke="currentColor" stroke-width="2"></rect>
                      <circle cx="32" cy="32" r="10" stroke="currentColor" stroke-width="2"></circle>
                    </svg>
                  </div>
                <% end %>
              </div>
              <h3 class="text-lg font-semibold text-slate-900 dark:text-slate-100"><%= service.name %></h3>
              <% if service.description.present? %>
                <p class="mt-1 text-sm text-slate-600 dark:text-slate-300"><%= service.description %></p>
              <% end %>
              <% if service.price_enrollment_euro.present? %>
                <p class="mt-2 text-sm font-semibold text-slate-800 dark:text-slate-200">
                  <% if service.price_enrollment_euro.to_f.zero? %>
                    Gratuito
                  <% else %>
                    <%= number_to_currency(service.price_enrollment_euro, unit: "€") %>
                  <% end %>
                </p>
              <% end %>
            </div>
          <% end %>
        </div>
      <% else %>
        <p class="text-sm text-slate-500 dark:text-slate-400">Nessun servizio disponibile.</p>
      <% end %>
    </main>
  </div>
</body>
