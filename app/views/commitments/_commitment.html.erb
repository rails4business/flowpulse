<% eventdate = commitment.eventdate %>
<div class="flex flex-col gap-3 rounded-xl border border-slate-200 bg-white p-4 shadow-sm">
  <div class="flex items-center justify-between gap-3">
    <div>
      <p class="text-sm font-semibold text-slate-900">
        <%= commitment.role_name.presence || "Commitment ##{commitment.id}" %>
      </p>
      <% if eventdate %>
        <p class="text-xs text-slate-500">
          Evento:
          <%= link_to eventdate_label(eventdate),
                eventdate_path(eventdate),
                class: "text-blue-600 hover:underline" %>
        </p>
      <% end %>
    </div>
    <span class="rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-700">
      <%= commitment.commitment_kind.humanize %>
    </span>
  </div>

  <div class="grid gap-4 text-xs text-slate-600 sm:grid-cols-3">
    <div>
      <p class="font-semibold text-slate-900">Area</p>
      <p><%= commitment.area.presence || "-" %></p>
    </div>
    <div>
      <p class="font-semibold text-slate-900">Durata</p>
      <p><%= commitment.duration_minutes.present? ? "#{commitment.duration_minutes} min" : "-" %></p>
    </div>
    <div>
      <p class="font-semibold text-slate-900">Posizione</p>
      <p><%= commitment.position || "-" %></p>
    </div>
  </div>

  <div class="flex flex-wrap gap-2 text-xs text-slate-500">
    <span>Urgency: <%= commitment.urgency || "-" %></span>
    <span>Importance: <%= commitment.importance || "-" %></span>
    <span>Energy: <%= commitment.energy || "-" %></span>
  </div>

  <div class="flex flex-wrap gap-2">
    <%= link_to "Dettagli", commitment_path(commitment),
          class: "rounded-md border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50" %>
    <%= link_to "Modifica", edit_commitment_path(commitment),
          class: "rounded-md border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50" %>
  </div>
</div>
